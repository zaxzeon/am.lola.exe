-- Function to set move name on the hotbar
local function setMoveName(moveNumber, moveName)
    local player = game.Players.LocalPlayer
    local playerGui = player.PlayerGui
    local hotbar = playerGui:FindFirstChild("Hotbar")
    local backpack = hotbar:FindFirstChild("Backpack")
    local hotbarFrame = backpack:FindFirstChild("Hotbar")
    local baseButton = hotbarFrame:FindFirstChild(tostring(moveNumber)).Base
    local toolName = baseButton.ToolName
    toolName.Text = moveName
end

-- Set all moves' names
setMoveName(1, "Red")
setMoveName(2, "Beatdown")
setMoveName(3, "Push")
setMoveName(4, "UpperHit")

-- Function to create VFX
local function createVFX(character)
    -- Create the ball
    local ball = Instance.new("Part")
    ball.Size = Vector3.new(1, 1, 1)  -- Size of the ball
    ball.Shape = Enum.PartType.Ball
    ball.Material = Enum.Material.Neon
    ball.BrickColor = BrickColor.new("Bright red")
    ball.Position = character.RightHand.Position
    ball.Anchored = true
    ball.CanCollide = false
    ball.Parent = workspace

    -- Create a pole
    local pole = Instance.new("Part")
    pole.Size = Vector3.new(0.2, 3, 0.2)  -- Size of the pole
    pole.Material = Enum.Material.Neon
    pole.BrickColor = BrickColor.new("Bright red")
    pole.Anchored = true
    pole.CanCollide = false
    pole.Position = character.RightHand.Position
    pole.Parent = workspace

    return ball, pole
end

-- Function to animate VFX
local function animateVFX(ball, pole)
    ball.Transparency = 0  -- Make the ball visible
    pole.Transparency = 1   -- Start with the pole invisible

    -- Animate the ball
    local tweenService = game:GetService("TweenService")
    local ballTween = tweenService:Create(ball, TweenInfo.new(1.2), {Size = Vector3.new(0.5, 0.5, 0.5), Position = ball.Position + Vector3.new(0, 2, 0), Transparency = 1})
    
    ballTween:Play()
    
    ballTween.Completed:Connect(function()
        pole.Position = ball.Position  -- Position the pole where the ball was
        pole.Transparency = 0  -- Make the pole visible
        ball:Destroy()         -- Remove the ball
        pole:Destroy()         -- Optionally remove the pole after some time if desired
    end)
end

-- Function to play animations
local function playMoveAnimation(moveId, animationId, speed, stopAfter)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")

    humanoid.AnimationPlayed:Connect(function(animationTrack)
        if animationTrack.Animation.AnimationId == "rbxassetid://" .. moveId then
            for _, animTrack in pairs(humanoid:GetPlayingAnimationTracks()) do
                animTrack:Stop()
            end

            local anim = Instance.new("Animation")
            anim.AnimationId = "rbxassetid://" .. animationId
            local loadedAnim = humanoid:LoadAnimation(anim)

            loadedAnim:Play()
            loadedAnim:AdjustSpeed(speed)

            -- Create and animate the VFX for Move 1
            if moveId == 10468665991 then  -- Check if it's Move 1
                local ball, pole = createVFX(character)
                animateVFX(ball, pole)
            end
            
            if stopAfter then
                delay(stopAfter, function()
                    loadedAnim:Stop()
                end)
            end
        end
    end)
end

-- Playing animations for each move
playMoveAnimation(10468665991, 12618271998, 1.2)  -- Move 1
playMoveAnimation(10466974800, 12460977270, 1)    -- Move 2
playMoveAnimation(10471336737, 12463072679, 1)    -- Move 3
playMoveAnimation(12510170988, 18179181663, 1)    -- Move 4

-- Additional moves
playMoveAnimation(10479335397, 13294790250, 1.3, 1.8)  -- Dash
playMoveAnimation(10503381238, 14900168720, 0.7, nil)  -- Uppercut
playMoveAnimation(10470104242, 12447247483, 6, nil)    -- Downslam

-- Function to set ultimate move
local function setUltimateName(ultimateName)
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    local screenGui = playerGui:FindFirstChild("ScreenGui")
    
    if screenGui then
        local magicHealthFrame = screenGui:FindFirstChild("MagicHealth")
        if magicHealthFrame then
            local textLabel = magicHealthFrame:FindFirstChild("TextLabel")
            if textLabel then
                textLabel.Text = ultimateName
            end
        end
    end
end

-- Set ultimate name
setUltimateName("Reverse Cursed Technique")

-- Animation for Ult Activation
playMoveAnimation(12447707844, 18778839005, 1)  -- Ultimate Activation
